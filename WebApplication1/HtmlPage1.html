<!DOCTYPE html>
<html>
<head>
    <title>Snowflake</title>
    <link href="StyleSheet.css?version=1.17" rel="stylesheet" />
    <script src="Scripts/jquery-2.1.1.js"></script>
    <script src="Scripts/jquery.easing.1.3.js"></script>

    <!--<script src="//cdn.jsdelivr.net/velocity/1.1.0/velocity.min.js"></script>
    <script src="//cdn.jsdelivr.net/velocity/1.1.0/velocity.ui.min.js"></script>-->
    <script src="Scripts/velocity.js"></script>
    <script src="Scripts/velocity.min.js"></script>
    <script src="Scripts/velocity.ui.js"></script>
    <script src="Scripts/velocity.ui.min.js"></script>


    <script>

        $(document).ready(function () { createflake(); });

        function createflake()
        {
            var stageheight = $(window.top).height();
            var stagewidth = $(window.top).width();
            var imgleft = 10;

            for (i = 1; i < 11; i++)
            {
                var imgleft = 10 * rand(1, 100);
                var imgfile = rand(1, 4);
                var imgsize = rand(10, 20);
                //imgleft = imgleft + (i * 10);
                $("body").append("<div id='divsnfl" + i + "' class='divsnfl'>&nbsp;</div>");
                $("#divsnfl" + i).css({ "left": imgleft });
                $("#divsnfl" + i).append("<img id='img" + i + " ' src='snowflake" + imgfile + ".png'  class='cssimg' height='" + imgsize + "' width ='" + imgsize + "' />");
                //$("#img").attr("src", "snowflake2.png");
                //$("#img").attr("src", 'snowflake2.png?' + new Date().getTime());
                
                    moveimg($("#divsnfl" + i)
                        , rand(1, stagewidth) //left starting position
                        , stageheight - 50 // bottom finishing position
                        , rand(7000, 15000) //speed
                    );


            }
        }

        function rand(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }


        function moveimg(ename, startleft, endbottom, speed)
        {


            var starttop = 0;
            var endtop = endbottom;
            var endleft = startleft + 10;

            $(ename).css({ "left": startleft})
 
            $(ename).velocity(
                { top: endtop, left: endleft }
                ,   {
                        duration: speed
                        , easing: 'linear'
                        , complete: function () {
                            ename.css({ top: starttop, left: startleft });
                            pause = 0;
                            moveimg(ename, startleft, endbottom, speed);
                        }
                    }
                );
        };

    </script>
</head>
<body>
    
    <!--<div id="divsnfl" style="position:absolute;" ><img src="snowflake2.png" />
    </div>-->
</body>
</html>